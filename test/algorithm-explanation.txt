
CORRECTED INSTAGRAM GRID ALGORITHM EXPLANATION
==============================================

The algorithm now correctly handles the Instagram grid inconsistency:

1. BACKGROUND EXTRACTION:
   - Each tile gets a full 1080×1350 background
   - Background position: (col * 1080 + shift, row * 1350)
   - Left tiles: shift = -64px (shows more left content)
   - Right tiles: shift = +64px (shows more right content)
   - Center tiles: shift = 0px (no shift)

2. SLICE EXTRACTION:
   - Each tile gets a 1015×1350 slice
   - Slice position: (backgroundLeft + 32, backgroundTop)
   - This is the portion that will be visible in Instagram's grid

3. COMPOSITING:
   - Place the 1015×1350 slice on top of the 1080×1350 background
   - Slice is positioned 32px from the left edge of the background
   - This creates the final 1080×1350 individual post

VISUAL EXAMPLE FOR 3×2 GRID:
============================

Mural: 3240×2700px (3×2 grid)

Tile (0,0) - LEFT TILE:
  Background: (-64, 0) to (1016, 1350)   [1080×1350] (shifted left 64px)
  Slice: (-32, 0) to (983, 1350)         [1015×1350]
  Final: Slice placed on background with 32px left padding

Tile (0,1) - CENTER TILE:
  Background: (1080, 0) to (2160, 1350)  [1080×1350] (no shift)
  Slice: (1112, 0) to (2127, 1350)       [1015×1350]
  Final: Slice placed on background with 32px left padding

Tile (0,2) - RIGHT TILE:
  Background: (2224, 0) to (3304, 1350)  [1080×1350] (shifted right 64px)
  Slice: (2256, 0) to (3271, 1350)       [1015×1350]
  Final: Slice placed on background with 32px left padding

WHY THIS WORKS:
==============

When Instagram displays the 1080×1350 post in the grid:
- Instagram shrinks it to 1015×1350
- The 32px left padding ensures the right portion is visible
- The background provides context for the areas that get cropped
- Result: Perfect seamless alignment in the Instagram grid

The key insights are:
1. The background should be the FULL 1080×1350 area for each tile
2. Left tiles need their background shifted left to show more left content
3. Right tiles need their background shifted right to show more right content
4. This ensures proper alignment and better edge coverage for all tiles
